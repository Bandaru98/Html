
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>




<!-- 
//-------------------
class user {
    constructor(username, emailId, password) {
        this.username = username,
            this.emailId = emailId,
            this.password = password
    }
    encrptPassword() {
        return (`${this.password}abc`)
    }
    changeUserName() {
        return `${this.username.toUpperCase()}`
    }
}

const emp1 = new user("Sanjay", "sanjay1995@gmail.com", 123);
console.log(emp1.encrptPassword());
console.log(emp1.changeUserName());


// behind the scene

const userNew = function(username,emailId,password){
    this.username = username,
    this.emailId = emailId,
    this.password = password
}

userNew.prototype.encrptPasswordNew = function(){
    return `${this.password}abc`
}

userNew.prototype.changeUserNameNew = function(){
    return `${this.username.toUpperCase()}`
}

const emp2 = new userNew("Himanshu","hima@1995gmail.com",321);

console.log(emp2.encrptPasswordNew());
console.log(emp2.changeUserNameNew());

//-----------------------------
// Construction Function //

const User = function (name, id, isLoggedIn) {
    this.name = name; // in coding practice function veriable and function parameters must be same
    this.id = id;
    this.isLoggedIn = isLoggedIn;
    return this
}

let user1 = new User("Suraj", 101, true); // 'new' keyword call a construction function
let user2 = new User("Mohit", 20, false); // user2 values over wright 'User' 
//console.log(user1);
console.log(user2);
//-----------------------------------------------------
// prototype is JavaScript behaviour

function multiplyBy5(num) {
    return num * 5;
}

multiplyBy5.power = 2;

console.log(multiplyBy5(5));
console.log(multiplyBy5.power);
console.log(multiplyBy5.prototype); // return {}
// emplty {} refer to this methode -by default contest set 

function createUser(username, score) {
    this.username = username;
    this.score = score;
}

// with the help of 'prototype' we can inject a methode (functionality) in our function 

createUser.prototype.increment = function () {
    this.score++;
}
createUser.prototype.printMe = function () {
    console.log(`price is ${this.score}`)
}

const tea = new createUser("tea", 20);
const coffee = new createUser("coffee", 50);

//console.log(createUser.prototype); // ...for checking the methode is inject or not

tea.printMe();

/* 

Here's what happens behind the scenes when the new keyword is used:

A new object is created : The new keyword initiates the creation of a new JavaScript object.

A prototype is linked: The newly created object gets linked to the prototype property of the constructor function.
this mean that it has access to properties and method defined on the constructor's prototype.

The constructor is called: The constructor function is called with the specified arguments and this is bound to the newly created object.
If no explicit return value is specified from the constructor, JavaScript assumes this, the newly created obect, to be the intended return vale.

The new object is returned: After the constructor function has been called, if it doesn't return a non-primitive value (object, array, function etc.), 
the newly created object is returned.

*/


// some other uses of Prototype //

let myHeros = ["thor", "spiderman"]

let heroPower = {
    thor: "hammer",
    spiderman: "sling",

    getSpiderPower: function () {
        console.log(`Spidy power is ${this.spiderman}`);
    }
}

Object.prototype.welcome = function () {
    console.log(`Welcome to the coding world`);
}
// the welcome methode can access both Array and Object 

myHeros.welcome();
heroPower.welcome();


Array.prototype.myArray = function () {
    console.log(`This is Array Prototype`);
}
// the myArray methode can access only Arrays

myHeros.myArray();
// heroPower.myArray(); // heroPower.myArray is not a function // Object can't access  only Array can



// prototype inheritance //

let obj1 = {
    name: "Himanshu",
    id: 101,
    skill: function () {
        console.log(`${this.name}'s communication skill is very nice`);
    }
}

let obj2 = {
    name: "Manish",
    id: 102,
    // __proto__: obj1
}

// obj2.__proto__ = obj1;

// modern syntex

Object.setPrototypeOf(obj2, obj1);

obj2.skill();



// string prototype inheritance //

let studentName = "Suraj    "

String.prototype.trueLength = function () {
    console.log(`${this}`); // the Value  who's call
    console.log(`True lenghth is : ${this.trim().length}`);
}

studentName.trueLength();

"Anand  ".trueLength();
//----------------------------------------------------------------

//-------------------



// Regular Expression // 
let pattern = /raj/i;
let string = "Suraj";
console.log(pattern.exec(string));

let pattern2 = /[a-z][0-9]/g;
let string2 = "s2810j";
console.log(pattern2.test(string2));



// Currying //

// Closures
function add(a) {
    return function (b) {
        return function (c) {
            return a + b + c;
        }
    }
}
// let data1=add(2);
// let data2=data1(3);
// let data3=data2(4);
let data = add(2)(3)(4);  // value of a retain it call lexical scope 
console.log(data); // Currying

let userObj = {
    name: "Suraj",
    age: 33
}

function userinfo(obj) {
    return function (info) {
        return obj[info];
    }
}
let res = userinfo(userObj);
console.log(res('name'));



// Callback Function //
function username() {
    console.log("Suraj");
}
function fun(callback) {
    callback();
}
fun(username);

// Callback Function //
function intro(age) {
    console.log("My name is Suraj & I'm " + age + " years old");
}
function userinfo(a, cb) {
    cb(a);
}
userinfo(33, intro);



// Memoization //
let sum = 0;
function cal(n) {
    for (let i = 0; i <= n; i++) {
        sum += i;
    }
    return sum;
}
const memoize = (fun) => {
    let cache = {};
    return function (...arg) {
        let n = arg[0];
        if (n in cache) {
            console.log("cache");
            return cache[n];
        } else {
            console.log("calculating first time");
            let result = fun(n);
            cache[n] = result;
            return result;
        }
    }
}
console.time();
const eff = memoize(cal);
console.log(eff(5));
console.timeEnd();



// Constructor //
function Cons(name, city,) {
    this.name = name;
    this.city = city;
}
let user = new Cons("Suraj", "Renukoot");
console.log(user);


// Prototype //
function mobile(model_no, Price) {
    // Instant Member
    this.model = model_no;
    this.price = Price;
};
let samsung = new mobile("Galaxy", 15000);
let nokia = new mobile(3310, 10000)

// Prototype Member
// samsung.color="white";
// nokia.color="white";
// classname.prototype.key="value";
mobile.prototype.color = "white";

console.log(samsung);
console.log(nokia);


// Class //

class student {
    constructor(name, age) {
        this.studentname = name;
        this.studentage = age;
    }
    details() {
        console.log(`Student name is ${this.studentname} and its age is ${this.studentage}`);
    }
    static st() {
        console.log("This is static methods");
    }
}
let rollNo1 = new student("Suraj", 33);
rollNo1.details();
student.st();



// Promise //

let prom=new Promise(function(res,rej){
    if(1){
        res("Successful");
    }else{
        rej("Failed");
    }
})
let onfullfilment=(result)=>{
    console.log(result);
}
let onreject=(error)=>{
    console.log(error);
}
prom.then(onfullfilment);
prom.catch(onreject);



// Generator Function //

function *fun(){
    console.log("First Message");
    yield 'Yied No 1';
    console.log("Second Message");
    yield 'Yied No 2';
    console.log("Third MEssage");
    yield 'Yied No 3';
}
let gen=fun();
console.log(gen.next());
//-----------------------------

// The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value. 

const promiseOne = new Promise(function (resolve, reject) {
    // Do async task
    // DB Call, Network, cryptograph
    setTimeout(function () {
        console.log("Async task is complete");
        resolve()
    }, 1000)
})

promiseOne.then(function () {
    console.log("Promised Consumed");
})



new Promise(function (resolve, reject) {
    setTimeout(function () {
        console.log("Async task2 is complete");
        resolve()
    }, 1000)
}).then(function () {
    console.log("Async Task2 resolve");
})



const promiseThree = new Promise(function (resolve, reject) {
    setTimeout(function () {
        resolve({ username: "Suraj Kumar", email: "sk@gmail.com" })
    }, 1000)
})

promiseThree.then(function (user) {
    console.log(user);
})



const promiseFour = new Promise(function (resolve, reject) {
    setTimeout(function () {
        let error = false;
        if (!error) {
            resolve({ username: "SURAJ KUMAR", email: "sk123@gmail.com" })
        } else {
            reject("Error: Something went wrong")
        }
    }, 1000)
})

promiseFour.then((user) => {
    console.log(user);
    return user.username
}).then((username) => {  // first then return value is recive by second than
    console.log(username);
}).catch((Error) => {
    console.log(Error);
}).finally(() => {
    console.log("The promise is either resolved or rejected");
})




const promiseFive = new Promise(function (resolve, reject) {
    setTimeout(function () {
        let error = false;
        if (!error) {
            resolve({ username: "JavaScript", password: 123 })
        } else {
            reject("Error: Something went wrong")
        }
    }, 1000)
});

async function consumePromiseFive() {
    try {
        const response = await promiseFive
        console.log(response);
    } catch (error) {
        console.log(error);
    }
}

consumePromiseFive()

//-----------------------------
// ----Problem---- //
// console.log("Start");
// function getName(name){
//     setTimeout(()=>{
//         console.log("Inside SetTimeOut");
//         console.log(name);
//     },2000);
// }
// const nm = getName("Suraj");
// console.log(nm);
// console.log("End");

//----Solution---- // .....with  callback funtion (construction function)
// console.log("Start");
// function getName(name ,cb){
//     setTimeout(()=>{
//         console.log("Inside SetTimeOut");
//         cb(name);
//     },2000);
// }
// getName("Suraj" ,(nm)=>{console.log(nm)});
// console.log("End");




// console.log("Start");
// function getName(name, cb) {
//     setTimeout(() => {
//         console.log("Inside Name SetTimeOut");
//         cb(name);
//     }, 2000);
// }
// function getHobbies(name, cb) {
//     setTimeout(() => {
//         console.log("Inside Hobbies SetTimeOut");
//         cb(["Cricket", "Hockey", "Football"]);
//     },1000)
// }
// getName("Suraj", (nm) => { console.log(nm), getHobbies(nm, (hobby) => { console.log(hobby) }) });
// console.log("End");




// with Promise //
// let prom = new Promise((res,rej)=>{
//     let x=true;
//     if(!x){
//         res("Solved");
//     }else{
//         rej("Reject");
//     }
// }).then((value)=>{
//     console.log(value);
// }).catch((value)=>{
//     console.log(value);
// }).finally(()=>{
//     console.log("Cleaned");
// })




// another way to promise produce//
function getName(name) {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            console.log("Inside Name SetTimeOut");
            resolve(name);
        }, 2000);
    })
}

function getHobbies(name) {
    return new Promise((resolve,reject)=>{
        setTimeout(() => {
            console.log("Inside Hobbies SetTimeOut");
            resolve(["Cricket", "Hockey", "Football"]);
        },1000)
    }) 
}

// promise consume //
// getName("Suraj")
// .then((nm)=>getHobbies(nm))
// .then((hobby)=>console.log(hobby))


// another way to consume promise //
// async function showHobbies(){
//     let nm = await getName("Suraj")
//     let hobby = await getHobbies(nm);
//     console.log(hobby);
// }


// (async and awit) consume promise with error handling //
async function showHobbies(){
    try{
        let nm = await getName("Suraj")
    let hobby = await getHobbies(nm);
    console.log(hobby);
    }catch{
        console.log("Something wrong");
    }
    
}

 showHobbies();
 //-------------------
 

//------------------- -->